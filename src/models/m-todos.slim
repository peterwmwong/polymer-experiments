link rel='import' href='../helpers/h-resource.html'

polymer-element [ name="m-todos"
                  extends="h-resource"
                  attributes="filterBy"
                  storeuid="ioi-store" ]
  coffee:
    Polymer 'm-todos',

      todos: []

      addTodo: ({text,done})->
        @todos.unshift newTodo = {text,done}
        @$.localstorage.save()
        newTodo

      removeTodo: (todo)->
        if -1 < (id = @todos.indexOf todo)
          @todos.splice id, 1
          @$.localstorage.save()

      onInitialStorageLoad: ->
        @asyncFire 'm-todos-load'
